---

title: cpp音视频开发
date: 2024-06-17
cover: /images/covers/
categories:
 - job

---


<!-- more -->

## 想找的工作方向

主要的方向是希望找cpp这一块的开发，因为比较喜欢c家族的代码风格吧。本科阶段写了挺多的javaweb项目，虽然没到达什么很深的阶段，但是还是觉得不是很喜欢这一块的开发。

调查了一下cpp的工作方向主要有嵌入式，云原生，游戏开发，qt桌面客户端，数据库存储，linux服务器方向。

我对linux的只是，简单的使用都是比较熟悉的，但是对更底层的接口就没怎么接触过。

虽然比较喜欢玩游戏，但是感觉游戏开发这个工作还是比较难找。

对于云原生，大数据存储了解的就更少了。

而音视频在现实生活中接触的比较多吧，而且感觉未来使用的场景也会随着传播媒介、应用场景的变化应该也不太会死掉。比较人的感官嗅觉和触觉还是比较难实现数字化的，视觉和听觉我觉得还是会一直用到。（赛博飞升，人脑接口，这大概也是离不开音视频数据传输的吧


## 计划一下

打算是做一个比较综合一点的项目，*音视频+linux后台（操作系统中的只是）+qt前端*，即使没找到音视频的工作也能有个qt相关的保底项目吧。

按照gpt老师的建议，要是分成几个学习阶段，同时也不能落下每天的算法代码部分。

| 阶段     | 主要任务                           | 输出成果                                  |
| -------- | ---------------------------------- | ----------------------------------------- |
| 第一阶段 | 音视频基础知识 + FFmpeg 命令行操作 | 写笔记 + 用命令完成转码、截图、裁剪等任务 |
| 第二阶段 | FFmpeg 解码流程 + 播放器框架入门   | 实现 YUV 视频文件播放                     |
| 第三阶段 | 音视频同步 + SDL 渲染              | 音视频同步播放 demo                       |
| 第四阶段 | 实现推流功能（摄像头 / 桌面）      | RTMP 推流 demo（配合 OBS / NGINX 测试）   |
| 第五阶段 | Qt + FFmpeg 简易播放器界面         | Qt 播放器 GUI 初版                        |


## ffmpeg

### stage 1


#### 音视频基础知识


**常见封装格式对比**
| 封装格式 | 全称/别名        | 主要用途            | 支持音视频轨 | 典型特点                     | 应用场景                 |
| -------- | ---------------- | ------------------- | ------------ | ---------------------------- | ------------------------ |
| **MP4**  | MPEG-4 Part 14   | 通用型播放与存储    | ✅            | 结构复杂，索引强，兼容好     | 本地播放、在线视频、存储 |
| **FLV**  | Flash Video      | 网络流媒体传输      | ✅            | 封装简单、延迟低，适合直播   | Flash 播放器、RTMP 直播  |
| **MKV**  | Matroska         | 高质量/多轨封装     | ✅            | 可封多轨字幕、音频，灵活开放 | 本地高清视频、多音轨资源 |
| **TS**   | Transport Stream | 广播/传输流媒体传输 | ✅            | 片段化强，适合流媒体逐段播放 | 直播、HLS（.m3u8 + .ts） |

**音视频网络协议封装格式对比表**
| 协议       | 封装格式 | 传输方式            | 延迟 | 支持双向？ | 典型用途                 | 特点总结                                     |
| ---------- | -------- | ------------------- | ---- | ---------- | ------------------------ | -------------------------------------------- |
| **RTMP**   | FLV      | 基于 TCP            | 低   | 否         | 直播推流（如 OBS）       | 实时性强、部署简单、兼容广                   |
| **RTSP**   | RTP      | TCP / UDP           | 低   | 是         | 摄像头、监控系统         | 支持控制命令（PAUSE/PLAY），低延迟           |
| **HLS**    | TS       | 基于 HTTP           | 高   | 否         | 网页直播 / 点播          | 分片传输、兼容性强、CDN 支持好               |
| **MMS**    | ASF      | TCP / UDP           | 中   | 否         | Windows Media 流媒体     | 已过时，被 RTSP 和 HLS 取代                  |
| **WebRTC** | SRTP     | UDP + ICE/STUN/DTLS | 极低 | 是         | 实时音视频通信、连麦互动 | 原生双向通信、极低延迟、浏览器支持、实现复杂 |

| 概念     | 定义                                                               |
| -------- | ------------------------------------------------------------------ |
| **编码** | 把原始音视频数据（如 YUV、PCM）压缩成可传输的格式（如 H.264、AAC） |
| **解码** | 把压缩数据（如 H.264、AAC）还原成原始数据，供播放或编辑使用        |

> YUV 是一种广泛使用的颜色编码格式，主要用于视频处理和压缩领域，用来表示图像的颜色信息。


视频编码格式大全
| 格式名     | 全称 / 简称     | 压缩效率    | 延迟 | 应用场景                 | 特点说明                                    |
| ---------- | --------------- | ----------- | ---- | ------------------------ | ------------------------------------------- |
| **H.264**  | AVC             | 高          | 中   | 视频播放、录制、直播     | 主流格式，兼容性好，支持 B 帧               |
| **H.265**  | HEVC            | 更高        | 中   | 4K/8K 视频、高清视频传输 | 压缩率比 H.264 高约 30%，需更强硬件解码     |
| **AV1**    | AOMedia Video 1 | 极高        | 高   | 未来网页视频、开源播放器 | 开源免费，压缩率比 H.265 更高，但编码速度慢 |
| **VP8**    | Google VP8      | 中等        | 低   | WebRTC、YouTube          | 开源、适合实时，替代 H.264                  |
| **VP9**    | Google VP9      | 高          | 中   | YouTube、网页高清视频    | 支持 4K，开源，压缩比优于 H.264             |
| **MPEG-2** | —               | 低          | 低   | DVD、广播电视            | 老旧格式，兼容性强但压缩率低                |
| **MJPEG**  | Motion JPEG     | 低          | 低   | 摄像头、老式录像设备     | 每帧为一张 JPEG，简单快速，但体积大         |
| **ProRes** | Apple ProRes    | 无损/轻压缩 | 高   | 后期剪辑、专业摄像       | 高质量中间格式，不适合播放或传输            |

> 压缩效率指的是在相同画质下，所需的数据量（码率）有多小。
> 延迟是指从采集或读取一帧数据，到它被成功编码传输并最终播放出来之间的时间间隔。


| 概念     | 表示的意义             | 越高表示…              |
| -------- | ---------------------- | ---------------------- |
| 压缩效率 | 同样画质下文件有多小   | ✅ 更节省体积和带宽     |
| 延迟     | 从编码到播放的等待时间 | ❌ 越高越不适合实时传输 |


音频编码格式大全
| 格式名        | 全称                      | 压缩方式 | 延迟 | 应用场景             | 特点说明                            |
| ------------- | ------------------------- | -------- | ---- | -------------------- | ----------------------------------- |
| **AAC**       | Advanced Audio Coding     | 有损     | 低   | 主流播放器、视频音轨 | 比 MP3 更高效，H.264 搭配常用       |
| **MP3**       | MPEG Layer 3              | 有损     | 中   | 音乐播放、老设备     | 历史最广泛格式，兼容强              |
| **Opus**      | —                         | 有损     | 极低 | WebRTC、语音通话     | 支持宽频/语音切换，低延迟，实时性强 |
| **PCM**       | Pulse Code Modulation     | 无压缩   | 低   | 音频处理、硬件采集   | 原始格式，体积大但保真              |
| **FLAC**      | Free Lossless Audio Codec | 无损压缩 | 中   | 音乐收藏、高清音频   | 保留完整音质，压缩率较高            |
| **ALAC**      | Apple Lossless            | 无损压缩 | 中   | Apple 设备高质量音频 | 与 FLAC 类似，但用于苹果生态        |
| **AMR-NB/WB** | Adaptive Multi-Rate       | 有损     | 极低 | 手机语音通信         | GSM/VoLTE 通信编码标准              |


> 编码压缩数据以便传输或保存，解码还原数据以便播放或处理。没有编码，视频文件无法高效传播；没有解码，就无法播放它。

> SDL 是一个 C 语言编写的跨平台开发库，常用于音视频播放、图形渲染和事件处理。

| 功能           | 说明                                            |
| -------------- | ----------------------------------------------- |
| **视频显示**   | 用于渲染 YUV 视频帧（例如 FFmpeg 解码后）       |
| **音频播放**   | 播放解码后的 PCM 音频数据                       |
| **窗口管理**   | 创建图形窗口，控制分辨率、刷新等                |
| **事件处理**   | 支持键盘、鼠标、窗口关闭等用户交互              |
| **跨平台支持** | 一次编写，运行在 Windows、Linux、macOS、Android |


