---
title: 数据链路层小结
date: 2022-06-09
categories:
 - 计算机网络
cover: /images/covers/baka.jpg
---


## 组帧
将比特组合成帧，添加首部尾部，分组。

*字符计数法*在帧头部添加计数段；

*字符填充*用特定字符表示开始与结束还有转义字符；

*零比特填充*特定的比特组合表示开始结束01111110，遇到5个1加一个0以防止6个1的出现；

*违规编码*对于物理编码一些不存在的情况用来界定开始结束。
## 差错控制

*奇偶校验*异或实现；

*CRC冗余校验*模2运算，除数$G(x)$阶数位$0$到$k-1$，被除数添加添加$k-1$个0；

*海明码*由位的下标组合经行奇偶校验，能够发现两位错误纠正一位错误。n位数据，k位校验位，$n+k\leq2^{k}-1$如果要发现两位就要加一个校验位这个是放在数据的最左边，采取偶校验，每个校验码值为是在海明码排序中，那些下标用校验位下标二进制表示时，使用到的该校验码的数据位的异或值。验证时同样用这几位加上校验位进行异或如果异或值位0责表示这些位都没错。如果位1则存在错误，通过多个校验码的正误总和确认传输错误的位，海明码排序后都二进制值就是错误位。需要二位校验在海明码最左侧添加校验位，对所有位都异或（不包括自己）。2位错误话添加的所有位异或位0虽然没错也是0，但同时其他海明验证码也会跟着错所以能判断。

##  流量控制

*停止-等待协议*，发一帧等一帧确认；

*滑动窗口协议*，按照发送窗口接受窗口的大小分为三种；

1. 单帧，发=收=1，超时重传或者确认帧丢失导致发送发重传交替使用ack01确认，如果确认帧重复位0或1就表明收到了重复帧，一趟的时间大致为**传输时延+传播时延+处理时间+确认帧传输时延+传播时延+处理时间**；

2. 多帧 后退N帧，一次性发送多一些的帧，一个帧出错了，这个帧及其后面的帧全部全部重传，为了减小开销可以收到好几个帧后发一个确认帧，收=1，对发送采用n位编码，发处于1至$2^n-1$中，如果如果窗口大了话，就会出现重复的序号，无法确认时新帧和旧帧。

3. 多帧窗口，选择重传，只重传对于怀疑出错的帧或者计时器超时的帧，接受窗口和发送串口都大于1，且发送窗口=接受窗口，由于是单帧确认，发送窗口大于接受窗口会产生溢出，接收窗口大于发送窗口会产生浪费。如果采用n为比特进行编码，发=收=$2^{n-1}$，编号周期是0到$2^n$,如果窗口大于$2^{n-1}$，假设全部完成接受，接收窗口向后移动后后可能会出现与移动窗口前相同的序号，如果发送窗口没有正确受到确认帧，进行重传，那么就可能会产生冲突了不知道是新帧还是旧帧。

### 信道的效率

也称*信道利用率*，发送方在一个发送周期内，发送数据的时间占整个发送周期的比率，发送周期为发送开始时间到收到第一个确认帧。**吞吐率=信道利用率*发送速率**

## 介质访问

主要是调配每个使用介质的结点，以达到提升传输效率的目的

### 信道划分介质访问控制

- *频分复用FDM*

将基带的传输频率划分成好多块，每个节点只能用一定的频率传输，经过多路复合技术，将多路基带信号叠加形成一个复合信号。充分利用带宽，技术成熟。


- *时分复用TDM*

将物理信道按时间划分成多个时间片，轮流分配给各个用户，这种效率不太高。统计（异步）时分多路复用STDM，不是固定给用户分配时间片，而是动态分配时间片。

- *波分复用WDM*

对光的频分复用。光纤中传不同波长光信号，互不干扰。

- *码分复用CDM*

通过采用不同的**编码**区分各路原始信号，同时共享信道的频率和时间。

**码分多址CDMA Code Division Multiple Access**，将一个比特由好m个比特表示，这好几个比特称为码片。每个站点有一个唯一的指定的m位码片序列表示1，反码表示0。多个站点同时发送数据时，将他们线性相加，要求各个站点码片相互正交。为了方便在码片中0用-1表示，1用+1表示。

用$S$表示A站的码片向量，$T$表示B站的码片向量。发送使线性叠加，数据分离时,若需要获得A站的数据将$S$与$S+T$或$S-T$进行内积，根据叠加原理，内积结果就是发送的数据。

### 随机访问介质访问控制

解决随机发送是产生的冲突问题。

- *ALOHA*

纯ALOHA协议，想发就发，没收到确认重发。

时隙ALOHA协议，同步时间，规定时隙，在时隙开始才能发。

- *CSMA*

载波监听多路访问，Carrier Sense Multiple Access

1-坚持，若要发送数据，先监听，空闲立即发，不空闲坚持监听。

非坚持，监听不忙发送，若忙放弃监听，随即等待一个时间后重复。

p-坚持，先监听，若忙继续听，若空闲以p的概率发送数据，1-p推迟，大概是几何分布吧。

- *CSMA/CD*

载波监听多路访问/碰撞检测，Carrier Sense Multiple Access with Collision Detection

比较复杂不记录了

- *CSMA/CA*

载波监听多路访问/碰撞避免，Carrier Sense Multiple Access with Collision Avoidance

比较复杂不记录了

### 轮询访问介质访问控制

- *令牌传递协议*

比较复杂不记录了


## 局域网

Local Area Network. IEE802.3与以太网，IEE802.11 无线局域网 

## 广域网

覆盖很广很广的网，里面有好多节点交换机，用于连接多个局域网或者其他广域网。结点交换机在单个网络工作，路由器在多个网络工作。

PPP协议 Point-to-Point Protocol


## 设备


中继器，长距离传输，将信号再生放大转发。

集线器，实质上是多端口中继器，一个端口接收数据，向其他所有端口除输入转发数据，多个端口共享带宽。如果多个输入会有冲突，属于一个冲突域。

网桥，将多个以太网连起来，组成一个更大的以太网

局域网交换器，本质上是多端口的网桥，将网络划分成更小的冲突域，提供更高带宽，实现VLAN，用户在通信时独占带宽不会共享。有自学习功能。

**不是很能理解设备对带宽的影响**，假设网络位10Mb/s，如果是集线器有N个设备在上面，N个设备同时只能由一个设备在工作，每个设备所分到的带宽要除以N，总的还是10Mb，如果是以太网交换机，有N个设备，每个设备发送和接受是互不干扰，那么总带宽就可以乘上N，每台设备还是10Mb。